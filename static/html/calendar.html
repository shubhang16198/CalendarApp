<!DOCTYPE html>
<html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<head>
    <title>CalendarApp</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link href="./../css/calendar.css" rel="stylesheet" type="text/css" />
    <link href="./../css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
    <script src="../js/sidebar.js"></script>
</head>
<body>
<table cellspacing="0" cellpadding="0" style="height: 100%; width: 100%; position: absolute; top: 0; bottom: 0; left: 0; right: 0;">
        <td id="sidebar" width="15%">
            <div id="sidebar">
                <div id="date-today" align="center" style="font-family: Arial, Helvetica, sans-serif; font-size: 50px;">
                    <span id="time"></span>
                    <script>
                        function updateClock() {
                            var now = new Date();
                            var time = gettime(now);
                            var ampm = getAMPM(now);
                            var x = document.getElementById("time");
                            x.innerHTML = '<span style="color : #f8f8f8;">' + time + '</span><span style="color : #f8f8f8; font-size:20px;">' + ampm + '</span>';
                            setTimeout(updateClock, 1000);
                        }
                        updateClock();
                    </script>
                </div>
                <div id="events-today" align="center">
                    <span style="text-align: left">Today</span>
                    <div id="events-today-events-list">
                    </div>
                    <script>
                        get_events_list(document.getElementById("events-today"));
                    </script>
                </div>
            </div>
        </td>
        <td id="calendar_tab" width="85%" style="padding-left: 50px; padding-right: 50px;">
            <table id="calendar" style="height: 100%;">
            <tr class="header">
              <th id="calendarHeader" class="no-border-left no-border-right no-border-top" colspan="7">
                <div>
                    <a href="" onclick="addYears(event, -1); return false;" style="color:#2ed39e">
                        <i class="fa fa-angle-double-left" aria-hidden="true"></i>
                    </a>
                    <a href="" onclick="addMonths(event, -1); return false;" style="color:#2ed39e">
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                    </a>
                    <a href="" onclick="targetDate = new Date(); setCalendar(event); return false;" style="color:#2ed39e">
                        <i class="fa fa-circle-o" aria-hidden="true"></i>
                    </a>
                    <a href="" onclick="addMonths(event, 1); return false;" style="color:#2ed39e">
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
                    <a href="" onclick="addYears(event, 1); return false;" style="color:#2ed39e">
                        <i class="fa fa-angle-double-right" aria-hidden="true"></i>
                    </a>
                </div>
              </th>
            </tr>
            <tr class="days">
              <th>Sunday</th>
              <th>Monday</th>
              <th>Tuesday</th>
              <th>Wednesday</th>
              <th>Thursday</th>
              <th>Friday</th>
              <th>Saturday</th>
            </tr>
            <tr>
              <td class="no-border-left"><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td class="no-border-right"><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
            </tr>
            <tr>
              <td class="no-border-left"><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td class="no-border-right"><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
            </tr>
            <tr>
              <td class="no-border-left"><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td class="no-border-right"><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
            </tr>
            <tr>
              <td class="no-border-left"><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td class="no-border-right"><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
            </tr>
            <tr>
              <td class="no-border-left"><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td class="no-border-right"><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
            </tr>
            <tr>
              <td class="no-border-left"><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
              <td class="no-border-right"><a class="date-link" href="" onclick="setTargetDate(event, this); new_event_form_position(this); return false;">&nbsp;</a></td>
            </tr>
            </table>
        </td>
    </tr>
</table>
<div id="new-event-form" class="hidden" style="border: #ff8787 1px solid; width:250px; border-radius: 2px; padding: 10px;">
    <div style="color:#ff8787;padding:10px 0 20px; 0; font-family: arial;">Current Date<span id="form-close" onclick="close_form()" style="float: right; color: #b3b3b3; cursor: pointer;">X</span> </div>
    <form id="new_form">
        <input type="text" name ="name" placeholder="Event Name" style="font-size: 20px;padding: 5px; width:235px;" /><br/>
        <span style="padding-left: 10px; color: #b3b3b3; font-family: arial; font-size: 15px;"> Starts </span><br/>
        <input id="start-date" name="start-date" type="date" data-date-inline-picker="true" style="width: 148px; padding: 5px;  " /><input id="start-time" name="start-time" type="time" style="width: 70px; margin-left: 5px; padding: 5px;" /><br/>
        <span style="padding-left: 10px; color: #b3b3b3;font-family: arial; font-size: 15px;"> Ends </span><br/>
        <input id="end-date" name="end-date" type="date" data-date-inline-picker="true" style="width: 148px; padding: 5px;  " /><input id="end-time" name="end-time" type="time" style="width: 70px; margin-left: 5px; padding: 5px;" /><br/>
        <input type="checkbox" name="all-day" id="all-day-check" /> <span style=" color: #b3b3b3;font-family: arial;"> All Day </span><br/>
        <span style="font-family: arial; color: #b3b3b3; font-size: 15px;">Description</span>  <br/>
        <textarea  name ="description" style="width: 235px; height: 100px; font-family: arial; padding: 5px;" ></textarea> <br/> <br />
        <div class="button button-cancel" onclick="close_form()" id="new-event-form-cancel">Cancel</div> &nbsp;&nbsp;&nbsp;&nbsp;
        <div class="button button-submit">
        <input type ="button" placeholder="Save" onclick="close_form();submitForm(this.form);" name ="Save" class="button button-submit" /> Save
        </div>
    </form>
    <br>
</div>
</body>
 <script src="./../js/calendar.js"></script>

 <script>
     $('.date-link').click(function() {
         $('#new-event-form').addClass("visible");
         $('#new-event-form').removeClass("hidden");
     });
     $('#new-event-form-cancel').click(function(){
         $(this).closest('form').find("input, textarea").val("");
         $(this).closest('form').find("input[type=date], input[type=time]").prop('disabled', false);
         $(this).closest('form').find("input[type=checkbox]").prop("checked", false);
     });
     $("#all-day-check").change(function() {
         if($(this).is(":checked")) {
             $("#start-date").prop('disabled', true);
             $("#start-time").prop('disabled', true);
             $("#end-date").prop('disabled', true);
             $("#end-time").prop('disabled', true);
         }
         if(!$(this).is(":checked")) {
             $("#start-date").prop('disabled', false);
             $("#start-time").prop('disabled', false);
             $("#end-date").prop('disabled', false);
             $("#end-time").prop('disabled', false);
         }
     });
 </script>
<script type="text/javascript">
    function new_event_form_position(obj) {
        document.getElementById("new_form").reset();
        new_event_form_object = document.getElementById("new-event-form");
        new_event_form_object.className = "visible";
        var x = obj.getBoundingClientRect();
        new_event_form_object.style.setProperty("top", x.top + "px");
        new_event_form_object.style.setProperty("left", x.left + "px");
    }
    function close_form() {
        new_event_form_object = document.getElementById("new-event-form");
        document.getElementById("new_form").reset();
        new_event_form_object.className = "hidden";
    }
    function submitForm(form){
      var url = '/create';
      var f ={};
          $(form).find("input[name]").each(function (index, node) {
        f[node.name] = node.value;
    });
          $(form).find("textarea[name]").each(function (index, node) {
        f[node.name] = node.value;
    });
      console.log(f);
      var formData = {
        "name": "hello",
        "description":"hi",
        "start":"2017-02-03T16:00:00+05:30",
        "end":  "2018-01-31T22:17:01+05:30"
      };
      // console.log(form);
      $.post(url, formData).done(function (data) {
        alert(data);
      });
    }
</script>
</html>
